# --- Clash 配置增强版 (Enhanced Clash Configuration) ---
# 此配置经过优化，可实现更精细的流量控制，
# 包括专用的中国节点组和完善的规则策略。

# --- 域名组（规则集） ---
# 注意：已合并重复的规则集定义。
ruleset=✨ AI,https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/AI.list
ruleset=✨ AI2,https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/AI2.list
ruleset=📘 GitHub,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/GitHub/GitHub.list
ruleset=👯‍♂️ TikTok,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/TikTok/TikTok.list
ruleset=🙋 Telegram,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list
ruleset=🕊️ Twitter(X),https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.list
ruleset=🗣️ Facebook,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Facebook/Facebook.list
ruleset=🌳 Amazon,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Amazon/Amazon.list
ruleset=🍎 Apple,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list
ruleset=Ⓜ️ Microsoft,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list
ruleset=🎮 Steam,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.list
# 游戏规则 - 分开定义规则源，但指向同一个“游戏”策略组是合理的
ruleset=🕹️ Game (Epic),https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.list
ruleset=🕹️ Game (EA),https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/EA/EA.list
ruleset=🕹️ Game (Blizzard),https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Blizzard/Blizzard.list
ruleset=🕹️ Game (UBI),https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/UBI/UBI.list
ruleset=🕹️ Game (Sony),https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Sony/Sony.list
ruleset=🕹️ Game (Nintendo),https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Nintendo/Nintendo.list
ruleset=🎞️ YouTube,https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/YouTube.list # 优先使用 liandu2024 的列表
ruleset=📺 Disney,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.list
ruleset=🎥 Netflix,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list
ruleset=🎬 HBO,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/HBO/HBO.list
ruleset=🎵 Spotify,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list
ruleset=🌍 国外 (全球),https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list # 优先使用 blackmatrix7 的全球列表
ruleset=➡️ 国内 (中国站点),https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs # 针对中国站点的特定 geosite 列表
ruleset=🛑 广告 (广告域名),https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising_Domain.list
ruleset=🛑 广告 (AdGuard基础),https://raw.githubusercontent.com/AdguardTeam/FiltersRegistry/master/filters/filter_2_Base/filter.txt
ruleset=🔒 隐私 (隐私与追踪),https://raw.githubusercontent.com/AdguardTeam/FiltersRegistry/master/filters/filter_3_Spyware/filter.txt
ruleset=🚫 恶意 (恶意与钓鱼),https://raw.githubusercontent.com/AdguardTeam/FiltersRegistry/master/filters/filter_4_PhishingMalware/filter.txt

# --- 策略组（域名组-节点组） ---
# 选择顺序建议：DIRECT > 特定区域自动 > 宽泛区域自动 > 全部自动 > 全部手动 > REJECT
custom_proxy_group=✨ AI`select`[]DIRECT`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]韩国-自动`[]美国-自动`[]🇨🇳 中国-自动`[]其他-自动`[]REJECT
custom_proxy_group=✨ AI2`select`[]DIRECT`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]韩国-自动`[]美国-自动`[]🇨🇳 中国-自动`[]其他-自动`[]REJECT
custom_proxy_group=📘 GitHub`select`[]DIRECT`[]所有-手动`[]所有-自动`[]日本-自动`[]美国-自动`[]香港-自动`[]其他-自动`[]REJECT
custom_proxy_group=👯‍♂️ TikTok`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=🙋 Telegram`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=🕊️ Twitter(X)`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=🗣️ Facebook`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=🌳 Amazon`select`[]DIRECT`[]所有-手动`[]所有-自动`[]美国-自动`[]日本-自动`[]其他-自动`[]REJECT
custom_proxy_group=🍎 Apple`select`[]DIRECT`[]美国-自动`[]香港-自动`[]日本-自动`[]新加坡-自动`[]🇨🇳 中国-自动`[]所有-自动`[]其他-自动`[]REJECT
custom_proxy_group=Ⓜ️ Microsoft`select`[]DIRECT`[]美国-自动`[]香港-自动`[]日本-自动`[]新加坡-自动`[]🇨🇳 中国-自动`[]所有-自动`[]其他-自动`[]REJECT
custom_proxy_group=🎮 Steam`select`[]DIRECT`[]香港-自动`[]日本-自动`[]美国-自动`[]所有-自动`[]其他-自动`[]REJECT
custom_proxy_group=🕹️ Game`select`[]DIRECT`[]香港-自动`[]日本-自动`[]韩国-自动`[]新加坡-自动`[]美国-自动`[]所有-自动`[]其他-自动`[]REJECT # 覆盖所有游戏规则集 (Epic, EA, Blizzard 等)
custom_proxy_group=🎞️ YouTube`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=📺 Disney`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=🎥 Netflix`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=🎬 HBO`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=🎵 Spotify`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=🌍 国外`select`[]所有-手动`[]所有-自动`[]港台日新韩-自动`[]台日新韩-自动`[]香港-自动`[]台湾-自动`[]日本-自动`[]新加坡-自动`[]韩国-自动`[]美国-自动`[]其他-自动`[]REJECT
custom_proxy_group=➡️ 国内`select`[]DIRECT`[]🇨🇳 中国-自动`[]REJECT # 国内流量优先DIRECT，可选中国代理作为备用
custom_proxy_group=🛑 广告`select`[]REJECT`[]DIRECT
custom_proxy_group=🔒 隐私`select`[]REJECT`[]DIRECT
custom_proxy_group=🚫 恶意`select`[]REJECT`[]DIRECT

# --- 节点组 ---
# url-test 参数: url, interval (秒), tolerance (毫秒), timeout (毫秒)
# 已调整参数以增强稳定性: interval 300, tolerance 50, timeout 2000
custom_proxy_group=所有-手动`select`.*
custom_proxy_group=所有-自动`url-test`.*`http://www.gstatic.com/generate_204`300,50,2000
custom_proxy_group=港台日新韩-自动`url-test`(香港|HK|Hong Kong|🇭🇰|台湾|TW|Tai Wan|🇹🇼|日本|JP|东京|大阪|埼玉|🇯🇵|新加坡|SG|狮城|🇸🇬|韩国|KR|首尔|🇰🇷)`http://www.gstatic.com/generate_204`300,50,2000
custom_proxy_group=台日新韩-自动`url-test`(台湾|TW|Tai Wan|🇹🇼|日本|JP|东京|大阪|埼玉|🇯🇵|新加坡|SG|狮城|🇸🇬|韩国|KR|首尔|🇰🇷)`http://www.gstatic.com/generate_204`300,50,2000
custom_proxy_group=香港-自动`url-test`(香港|HK|Hong Kong|🇭🇰)`http://www.gstatic.com/generate_204`300,50,2000
custom_proxy_group=台湾-自动`url-test`(台湾|TW|Tai Wan|🇹🇼)`http://www.gstatic.com/generate_204`300,50,2000
custom_proxy_group=日本-自动`url-test`(日本|JP|东京|大阪|埼玉|🇯🇵)`http://www.gstatic.com/generate_204`300,50,2000
custom_proxy_group=新加坡-自动`url-test`(新加坡|SG|狮城|🇸🇬)`http://www.gstatic.com/generate_204`300,50,2000
custom_proxy_group=韩国-自动`url-test`(韩国|KR|首尔|🇰🇷)`http://www.gstatic.com/generate_204`300,50,2000
custom_proxy_group=美国-自动`url-test`(美国|US|洛杉矶|硅谷|西雅图|纽约|🇺🇸)`http://www.gstatic.com/generate_204`300,50,2000
# 新增中国节点组 (New China Node Group) - 根据您的节点命名规则调整正则表达式中的关键词
custom_proxy_group=中国-自动`url-test`(CN|China|中国|大陆|陸|上海|北京|深圳|广州|杭州|成都|移动|联通|电信|广移|广联|广电|沪|京|粤|苏|浙|川|🇨🇳)`http://www.gstatic.com/generate_204`300,50,2000
custom_proxy_group=其他-自动`url-test`(?!.*(香港|HK|台湾|TW|日本|JP|新加坡|SG|韩国|KR|美国|US|CN|China|中国|大陆|陸|REJECT|DIRECT)).*`http://www.gstatic.com/generate_204`300,50,2000

# --- 启用规则集 ---
# 以下设置适用于支持规则提供器和生成的 Clash 核心（例如 Stash、带解析脚本的 Clash Meta）
enable_rule_generator=true
overwrite_original_rules=true


# --- （可选）规则 (Rules) 部分 ---
# 如果您的 Clash 客户端分别处理 'rules:' 部分，或者您没有使用 'overwrite_original_rules=true'，
# 或者您想更明确地定义规则顺序，您需要像下面这样添加 'rules:' 部分。
# 注意：这部分内容通常由支持规则生成的客户端根据上述 ruleset 和 custom_proxy_group 自动生成。
# 如果手动编写，请确保规则顺序的逻辑性（例如，广告拦截优先，其次是特定应用，然后是地区，最后是 MATCH）。
#
# rules:
#   # 广告、隐私、恶意软件规则（通常建议 REJECT）
#   - RULE-SET,🛑 广告,🛑 广告 # 假设“🛑 广告”策略组里首选 REJECT
#   - RULE-SET,🔒 隐私,🔒 隐私 # 假设“🔒 隐私”策略组里首选 REJECT
#   - RULE-SET,🚫 恶意,🚫 恶意 # 假设“🚫 恶意”策略组里首选 REJECT
#
#   # 应用程序和特定服务规则
#   - RULE-SET,✨ AI,✨ AI
#   - RULE-SET,✨ AI2,✨ AI2
#   - RULE-SET,📘 GitHub,📘 GitHub
#   - RULE-SET,👯‍♂️ TikTok,👯‍♂️ TikTok
#   - RULE-SET,🙋 Telegram,🙋 Telegram
#   - RULE-SET,🕊️ Twitter(X),🕊️ Twitter(X)
#   - RULE-SET,🗣️ Facebook,🗣️ Facebook
#   - RULE-SET,🌳 Amazon,🌳 Amazon
#   - RULE-SET,🍎 Apple,🍎 Apple
#   - RULE-SET,Ⓜ️ Microsoft,Ⓜ️ Microsoft
#   - RULE-SET,🎮 Steam,🎮 Steam
#   - RULE-SET,🕹️ Game (Epic),🕹️ Game # 所有游戏规则集都指向 "🕹️ Game" 策略组
#   - RULE-SET,🕹️ Game (EA),🕹️ Game
#   - RULE-SET,🕹️ Game (Blizzard),🕹️ Game
#   - RULE-SET,🕹️ Game (UBI),🕹️ Game
#   - RULE-SET,🕹️ Game (Sony),🕹️ Game
#   - RULE-SET,🕹️ Game (Nintendo),🕹️ Game
#   - RULE-SET,🎞️ YouTube,🎞️ YouTube
#   - RULE-SET,📺 Disney,📺 Disney
#   - RULE-SET,🎥 Netflix,🎥 Netflix
#   - RULE-SET,🎬 HBO,🎬 HBO
#   - RULE-SET,🎵 Spotify,🎵 Spotify
#
#   # 国内流量规则
#   - RULE-SET,➡️ 国内 (中国站点),➡️ 国内
#   - GEOIP,CN,➡️ 国内 # 中国大陆IP地址的流量
#
#   # 国外流量规则 / 最终备用规则
#   - RULE-SET,🌍 国外 (全球),🌍 国外 # 其他所有域名匹配此规则
#   - MATCH,🌍 国外 # 所有其他未匹配的连接（最终规则）
