### å…¨å±€é…ç½®
mixed-port: 7897
allow-lan: true
mode: rule
log-level: warning
ipv6: false
find-process-mode: strict
profile:
  store-selected: true
  store-fake-ip: true
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome

### DNSé…ç½®
dns:
    enable: true
    listen: 0.0.0.0:53
    ipv6: false
    prefer-h3: true
    enhanced-mode: fake-ip
    use-hosts: true
    use-system-hosts: true
    nameserver:
        - https://223.5.5.5/dns-query
        - https://dns.pub/dns-query
    fake-ip-range: 198.18.0.1/16
    fake-ip-filter:
      - "+.Mijia Cloud"
      - "+.dlg.io.mi.com"

### åŸŸåå—…æ¢
sniffer:
    enable: true
    sniff:
        HTTP:
            ports: [80, 8080-8880]
            override-destination: true
        TLS:
            ports: [443, 8443]
        QUIC:
            ports: [443, 8443]
    skip-domain:
        - "Mijia Cloud"
        - dlg.io.mi.com
        - "+.push.apple.com"

# --- ç­–ç•¥ç»„ ---
# æ ¹æ®æ‚¨çš„ `custom_proxy_group` å®šä¹‰ç”Ÿæˆ
proxy-groups:
  # --- Part 3: èŠ‚ç‚¹ç»„ ---
  - name: ğŸŒ å…¨çƒè‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    # ä½¿ç”¨ filter ç­›é€‰å›½å¤–èŠ‚ç‚¹
    filter: '^(?!.*(CN|China|ä¸­å›½|å¤§é™†|é™¸|ä¸Šæµ·|åŒ—äº¬|æ·±åœ³|å¹¿å·|æ­å·|æˆéƒ½|ç§»åŠ¨|è”é€š|ç”µä¿¡|å¹¿ç§»|å¹¿è”|å¹¿ç”µ|æ²ª|äº¬|ç²¤|è‹|æµ™|å·|ğŸ‡¨ğŸ‡³|DIRECT|REJECT)).*$'
  - name: ğŸŒ å…¨çƒæ‰‹åŠ¨
    type: select
    # ä½¿ç”¨ filter ç­›é€‰å›½å¤–èŠ‚ç‚¹
    filter: '^(?!.*(CN|China|ä¸­å›½|å¤§é™†|é™¸|ä¸Šæµ·|åŒ—äº¬|æ·±åœ³|å¹¿å·|æ­å·|æˆéƒ½|ç§»åŠ¨|è”é€š|ç”µä¿¡|å¹¿ç§»|å¹¿è”|å¹¿ç”µ|æ²ª|äº¬|ç²¤|è‹|æµ™|å·|ğŸ‡¨ğŸ‡³|DIRECT|REJECT)).*$'
  - name: ğŸ‡¨ğŸ‡³ å›½å†…æ‰‹åŠ¨
    type: select
    # ä½¿ç”¨ filter ç­›é€‰å›½å†…èŠ‚ç‚¹
    filter: '(CN|China|ä¸­å›½|å¤§é™†|é™¸|ä¸Šæµ·|åŒ—äº¬|æ·±åœ³|å¹¿å·|æ­å·|æˆéƒ½|ç§»åŠ¨|è”é€š|ç”µä¿¡|å¹¿ç§»|å¹¿è”|å¹¿ç”µ|æ²ª|äº¬|ç²¤|è‹|æµ™|å·|ğŸ‡¨ğŸ‡³)'

  # --- Part 1: æ ¸å¿ƒç­–ç•¥ç»„ ---
  - name: ğŸŒ å›½å¤–ç­–ç•¥
    type: select
    proxies:
      - ğŸŒ å…¨çƒè‡ªåŠ¨
      - ğŸŒ å…¨çƒæ‰‹åŠ¨
      - DIRECT
  - name: â¡ï¸ å›½å†…ç­–ç•¥
    type: select
    proxies:
      - DIRECT
      - ğŸ‡¨ğŸ‡³ å›½å†…æ‰‹åŠ¨
  - name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - DIRECT
  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸŒ å›½å¤–ç­–ç•¥
      - â¡ï¸ å›½å†…ç­–ç•¥

  # --- Part 2: åº”ç”¨ç­–ç•¥ç»„ ---
  # [å›½å¤–æœåŠ¡]
  - {name: âœ¨ AI, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥, â¡ï¸ å›½å†…ç­–ç•¥]}
  - {name: âœ¨ AI2, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥, â¡ï¸ å›½å†…ç­–ç•¥]}
  - {name: ğŸ‘¯â€â™‚ï¸ TikTok, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ™‹ Telegram, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ•Šï¸ Twitter(X), type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ—£ï¸ Facebook, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸï¸ YouTube, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ“º Disney, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ¥ Netflix, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ¬ HBO, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸµ Spotify, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸŒ å›½å¤–, type: select, proxies: [ğŸŒ å›½å¤–ç­–ç•¥]}

  # [å¯èƒ½éœ€è¦ç›´è¿çš„æœåŠ¡]
  - {name: ğŸ“˜ GitHub, type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸŒ³ Amazon, type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ Apple, type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: â“‚ï¸ Microsoft, type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ‡¬ğŸ‡´ Google, type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ® Steam, type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ•¹ï¸ Game (Epic), type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ•¹ï¸ Game (EA), type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ•¹ï¸ Game (Blizzard), type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ•¹ï¸ Game (UBI), type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ•¹ï¸ Game (Sony), type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}
  - {name: ğŸ•¹ï¸ Game (Nintendo), type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}

  # [å›½å†…ã€å¹¿å‘Šä¸ç‰¹æ®Šè§„åˆ™]
  - {name: â¡ï¸ å›½å†…, type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥]}
  - {name: ğŸ›‘ å¹¿å‘Š, type: select, proxies: [ğŸ›‘ å¹¿å‘Šæ‹¦æˆª]}
  - {name: ğŸ”’ éšç§, type: select, proxies: [ğŸ›‘ å¹¿å‘Šæ‹¦æˆª]}
  - {name: ğŸš« æ¶æ„, type: select, proxies: [ğŸ›‘ å¹¿å‘Šæ‹¦æˆª]}
  - {name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [â¡ï¸ å›½å†…ç­–ç•¥, ğŸŒ å›½å¤–ç­–ç•¥]}

# --- è§„åˆ™é›† ---
# æ ¹æ®æ‚¨çš„ `ruleset` å®šä¹‰ç”Ÿæˆ
rule-providers:
  âœ¨ AI: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/AI.list", path: ./ruleset/AI.yaml, interval: 86400}
  âœ¨ AI2: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/AI2.list", path: ./ruleset/AI2.yaml, interval: 86400}
  ğŸ“˜ GitHub: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/GitHub/GitHub.list", path: ./ruleset/GitHub.yaml, interval: 86400}
  ğŸ‘¯â€â™‚ï¸ TikTok: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/TikTok/TikTok.list", path: ./ruleset/TikTok.yaml, interval: 86400}
  ğŸ™‹ Telegram: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list", path: ./ruleset/Telegram.yaml, interval: 86400}
  ğŸ•Šï¸ Twitter(X): {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.list", path: ./ruleset/Twitter.yaml, interval: 86400}
  ğŸ—£ï¸ Facebook: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Facebook/Facebook.list", path: ./ruleset/Facebook.yaml, interval: 86400}
  ğŸŒ³ Amazon: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Amazon/Amazon.list", path: ./ruleset/Amazon.yaml, interval: 86400}
  ğŸ Apple: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list", path: ./ruleset/Apple.yaml, interval: 86400}
  â“‚ï¸ Microsoft: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list", path: ./ruleset/Microsoft.yaml, interval: 86400}
  ğŸ® Steam: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.list", path: ./ruleset/Steam.yaml, interval: 86400}
  ğŸ•¹ï¸ Game (Epic): {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.list", path: ./ruleset/Game_Epic.yaml, interval: 86400}
  ğŸ•¹ï¸ Game (EA): {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/EA/EA.list", path: ./ruleset/Game_EA.yaml, interval: 86400}
  ğŸ•¹ï¸ Game (Blizzard): {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Blizzard/Blizzard.list", path: ./ruleset/Game_Blizzard.yaml, interval: 86400}
  ğŸ•¹ï¸ Game (UBI): {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/UBI/UBI.list", path: ./ruleset/Game_UBI.yaml, interval: 86400}
  ğŸ•¹ï¸ Game (Sony): {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Sony/Sony.list", path: ./ruleset/Game_Sony.yaml, interval: 86400}
  ğŸ•¹ï¸ Game (Nintendo): {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Nintendo/Nintendo.list", path: ./ruleset/Game_Nintendo.yaml, interval: 86400}
  ğŸï¸ YouTube: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/YouTube.list", path: ./ruleset/YouTube.yaml, interval: 86400}
  ğŸ“º Disney: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.list", path: ./ruleset/Disney.yaml, interval: 86400}
  ğŸ¥ Netflix: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list", path: ./ruleset/Netflix.yaml, interval: 86400}
  ğŸ¬ HBO: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/HBO/HBO.list", path: ./ruleset/HBO.yaml, interval: 86400}
  ğŸµ Spotify: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list", path: ./ruleset/Spotify.yaml, interval: 86400}
  ğŸ‡¬ğŸ‡´ Google: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.list", path: ./ruleset/Google.yaml, interval: 86400}
  ğŸŒ å›½å¤–: {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list", path: ./ruleset/Global.yaml, interval: 86400}
  â¡ï¸ å›½å†…: {type: http, behavior: domain, format: mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs", path: ./ruleset/cn.mrs, interval: 86400}
  ğŸ›‘ å¹¿å‘Š (å¹¿å‘ŠåŸŸå): {type: http, behavior: domain, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising_Domain.list", path: ./ruleset/Advertising_Domain.yaml, interval: 86400}
  ğŸ›‘ å¹¿å‘Š (AdGuardåŸºç¡€): {type: http, behavior: classical, url: "https://raw.githubusercontent.com/AdguardTeam/FiltersRegistry/master/filters/filter_2_Base/filter.txt", path: ./ruleset/AdGuard_Base.yaml, interval: 86400}
  ğŸ”’ éšç§ (éšç§ä¸è¿½è¸ª): {type: http, behavior: classical, url: "https://raw.githubusercontent.com/AdguardTeam/FiltersRegistry/master/filters/filter_3_Spyware/filter.txt", path: ./ruleset/AdGuard_Spyware.yaml, interval: 86400}
  ğŸš« æ¶æ„ (æ¶æ„ä¸é’“é±¼): {type: http, behavior: classical, url: "https://raw.githubusercontent.com/AdguardTeam/FiltersRegistry/master/filters/filter_4_PhishingMalware/filter.txt", path: ./ruleset/AdGuard_Phishing.yaml, interval: 86400}

# --- åˆ†æµè§„åˆ™ ---
rules:
  - RULE-SET,âœ¨ AI,âœ¨ AI
  - RULE-SET,âœ¨ AI2,âœ¨ AI2
  - RULE-SET,ğŸ“˜ GitHub,ğŸ“˜ GitHub
  - RULE-SET,ğŸ‘¯â€â™‚ï¸ TikTok,ğŸ‘¯â€â™‚ï¸ TikTok
  - RULE-SET,ğŸ™‹ Telegram,ğŸ™‹ Telegram
  - RULE-SET,ğŸ•Šï¸ Twitter(X),ğŸ•Šï¸ Twitter(X)
  - RULE-SET,ğŸ—£ï¸ Facebook,ğŸ—£ï¸ Facebook
  - RULE-SET,ğŸŒ³ Amazon,ğŸŒ³ Amazon
  - RULE-SET,ğŸ Apple,ğŸ Apple
  - RULE-SET,â“‚ï¸ Microsoft,â“‚ï¸ Microsoft
  - RULE-SET,ğŸ® Steam,ğŸ® Steam
  - RULE-SET,ğŸ•¹ï¸ Game (Epic),ğŸ•¹ï¸ Game (Epic)
  - RULE-SET,ğŸ•¹ï¸ Game (EA),ğŸ•¹ï¸ Game (EA)
  - RULE-SET,ğŸ•¹ï¸ Game (Blizzard),ğŸ•¹ï¸ Game (Blizzard)
  - RULE-SET,ğŸ•¹ï¸ Game (UBI),ğŸ•¹ï¸ Game (UBI)
  - RULE-SET,ğŸ•¹ï¸ Game (Sony),ğŸ•¹ï¸ Game (Sony)
  - RULE-SET,ğŸ•¹ï¸ Game (Nintendo),ğŸ•¹ï¸ Game (Nintendo)
  - RULE-SET,ğŸï¸ YouTube,ğŸï¸ YouTube
  - RULE-SET,ğŸ“º Disney,ğŸ“º Disney
  - RULE-SET,ğŸ¥ Netflix,ğŸ¥ Netflix
  - RULE-SET,ğŸ¬ HBO,ğŸ¬ HBO
  - RULE-SET,ğŸµ Spotify,ğŸµ Spotify
  - RULE-SET,ğŸ‡¬ğŸ‡´ Google,ğŸ‡¬ğŸ‡´ Google
  - RULE-SET,ğŸŒ å›½å¤–,ğŸŒ å›½å¤–
  - RULE-SET,â¡ï¸ å›½å†…,â¡ï¸ å›½å†…
  - RULE-SET,ğŸ›‘ å¹¿å‘Š (å¹¿å‘ŠåŸŸå),ğŸ›‘ å¹¿å‘Š
  - RULE-SET,ğŸ›‘ å¹¿å‘Š (AdGuardåŸºç¡€),ğŸ›‘ å¹¿å‘Š
  - RULE-SET,ğŸ”’ éšç§ (éšç§ä¸è¿½è¸ª),ğŸ”’ éšç§
  - RULE-SET,ğŸš« æ¶æ„ (æ¶æ„ä¸é’“é±¼),ğŸš« æ¶æ„
  # å¯¹åº” `ruleset=ğŸ¯ å…¨çƒç›´è¿,[]GEOIP,CN`
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
  # å¯¹åº” `ruleset=ğŸŸ æ¼ç½‘ä¹‹é±¼,[]FINAL`
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
